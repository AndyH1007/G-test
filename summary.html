<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¹´çµ‚å ±å‘Š</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h1>å¹´çµ‚å ±å‘Š ğŸ“Š</h1>
  <p>ç•«å»Šåç¨±ï¼š<span id="name"></span></p>
  <p>æœ€çµ‚è³‡é‡‘ï¼š<span id="money"></span></p>
  <p>æœ€çµ‚è²æœ›ï¼š<span id="reputation"></span></p>

  <canvas id="moneyChart" width="400" height="200"></canvas>
  <canvas id="reputationChart" width="400" height="200"></canvas>
  <canvas id="rateChart" width="400" height="200"></canvas>

  <script>
    const state = JSON.parse(localStorage.getItem("my_gallery_state"));
    document.getElementById("name").innerText = state.galleryName;
    document.getElementById("money").innerText = state.money;
    document.getElementById("reputation").innerText = state.reputation;

    const labels = state.history.map(h => "ç¬¬" + h.month + "æœˆ");
    const moneyData = state.history.map(h => h.money);
    const repData = state.history.map(h => h.reputation);
    const rateData = state.history.map(h => h.rate || 0);

    const config = (label, data, color) => ({
      type: 'line',
      data: {
        labels,
        datasets: [{ label, data, fill: false, borderColor: color, tension: 0.1 }]
      },
      options: { responsive: true }
    });

    new Chart(document.getElementById("moneyChart"), config("è³‡é‡‘è®ŠåŒ–", moneyData, "green"));
    new Chart(document.getElementById("reputationChart"), config("è²æœ›è®ŠåŒ–", repData, "blue"));
    new Chart(document.getElementById("rateChart"), config("éŠ·å”®ç‡è®ŠåŒ–", rateData, "orange"));
  </script>
</body>
</html>
