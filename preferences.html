
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>媒材與概念偏好設定</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; padding: 2rem; max-width: 720px; margin: auto; }
    h2 { color: #333; }
    ul { list-style: none; padding: 0; }
    li { margin: 0.5rem 0; padding: 0.5rem; background: #f0f0f0; cursor: grab; }
    button { margin-top: 1.5rem; padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>請拖曳排序你的偏好</h2>
  <p>媒材偏好（上方為最喜歡）：</p>
  <ul id="materialList">
    <li>繪畫</li>
    <li>雕塑</li>
    <li>裝置</li>
    <li>錄像</li>
    <li>其他</li>
  </ul>

  <p>概念偏好（上方為最喜歡）：</p>
  <ul id="conceptList">
    <li>經典</li>
    <li>中生代</li>
    <li>當代</li>
  </ul>

  <button onclick="savePreferences()">儲存並開始遊戲</button>

  <script>
    function makeSortable(id) {
      const el = document.getElementById(id);
      let dragging;
      el.addEventListener("dragstart", e => dragging = e.target);
      el.addEventListener("dragover", e => e.preventDefault());
      el.addEventListener("drop", e => {
        if (e.target.tagName === "LI") {
          const from = dragging;
          const to = e.target;
          const temp = document.createElement("li");
          el.insertBefore(temp, from);
          el.insertBefore(from, to);
          el.insertBefore(to, temp);
          el.removeChild(temp);
        }
      });
      Array.from(el.children).forEach(li => li.draggable = true);
    }

    function savePreferences() {
      const state = JSON.parse(localStorage.getItem("my_gallery_state"));
      const material = Array.from(document.querySelectorAll("#materialList li")).map(li => li.textContent);
      const concept = Array.from(document.querySelectorAll("#conceptList li")).map(li => li.textContent);
      state.preferences = { material, concept };
      localStorage.setItem("my_gallery_state", JSON.stringify(state));
      window.location.href = "turn.html";
    }

    makeSortable("materialList");
    makeSortable("conceptList");
  </script>
</body>
</html>
